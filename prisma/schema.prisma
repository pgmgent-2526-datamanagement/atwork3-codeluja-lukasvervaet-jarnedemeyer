// ============================================
// PRISMA SCHEMA CONFIGURATION
// ============================================

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// USER MANAGEMENT
// ============================================

model User {
  id        Int      @id @default(autoincrement())
  firstName String
  lastName  String
  email     String   @unique
  phone     String?
  password  String
  role_id   Int?
  active    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  role      UserRole? @relation(fields: [role_id], references: [id])
}

model UserRole {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  users       User[]
}

// ============================================
// HOST & SHIFT MANAGEMENT
// ============================================

model Host {
  id        Int      @id @default(autoincrement())
  firstName String
  lastName  String
  status    HostStatus @default(STUDENT)
  label     HostLabel? 
  active    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  bookingHosts BookingHost[]
}

enum HostStatus {
  MEDEWERKER
  STUDENT
}

enum HostLabel {
  EXPERIENCED
  TRAINING
}

// ============================================
// BOOKING MANAGEMENT
// ============================================

model Booking {
  id                 Int      @id @default(autoincrement())
  externalId         String?  @unique
  venue              String?
  dayOfWeek          String?
  startTime          DateTime @db.Time
  endTime            DateTime @db.Time
  bookingDate        DateTime @db.Date
  playersCount       Int
  hostsRequired      Int
  food_required      Boolean  @default(false)
  is_b2b             Boolean  @default(false)
  status             String?
  eposFamily         String?
  packageName        String?
  bookingDescription String?
  notes              String?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  bookingHosts       BookingHost[]
}

model BookingHost {
  id        Int @id @default(autoincrement())
  bookingId Int
  hostId    Int

  booking   Booking @relation(fields: [bookingId], references: [id], onDelete: Cascade)
  host      Host    @relation(fields: [hostId], references: [id])
}